const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./IntroPage-CpzawxB8.js","./index-B4nEabuQ.js","./index-Ds_WtsaM.css","./proxy-Dsw0E1L7.js","./x-DBTCGfmi.js","./GamePage-3pGdFpPG.js","./ResultPage-Dn1D5W_y.js","./ThankYouPage-Db2OGyze.js"])))=>i.map(i=>d[i]);
import{r as s,j as a,R as D,a as h,N as T,_ as b,u as S}from"./index-B4nEabuQ.js";const R=[{id:"pension",label:"Pension",shortLabel:"PEN",emoji:"ðŸ¦",color:"bg-pillar-pension",textColor:"text-white",borderColor:"border-pillar-pension",bgLight:"bg-pillar-pension/15",description:"Regular retirement pension income"},{id:"rental",label:"Rental Income",shortLabel:"REN",emoji:"ðŸ ",color:"bg-pillar-rental",textColor:"text-white",borderColor:"border-pillar-rental",bgLight:"bg-pillar-rental/15",description:"Income from property rentals"},{id:"savings",label:"Savings",shortLabel:"SAV",emoji:"ðŸ’°",color:"bg-pillar-savings",textColor:"text-sudoku-bg",borderColor:"border-pillar-savings",bgLight:"bg-pillar-savings/15",description:"Personal savings and investments"},{id:"medical",label:"Medical Fund",shortLabel:"MED",emoji:"ðŸ¥",color:"bg-pillar-medical",textColor:"text-white",borderColor:"border-pillar-medical",bgLight:"bg-pillar-medical/15",description:"Healthcare and medical reserve"},{id:"leisure",label:"Leisure",shortLabel:"LEI",emoji:"âœˆï¸",color:"bg-pillar-leisure",textColor:"text-white",borderColor:"border-pillar-leisure",bgLight:"bg-pillar-leisure/15",description:"Leisure and lifestyle spending"}],J=R.reduce((e,l)=>(e[l.id]=l,e),{}),m=5,_=120,O=.5,Q=20;function G(e){const l=[...e];for(let r=l.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[l[r],l[n]]=[l[n],l[r]]}return l}function v(){const e=R.map(i=>i.id),l=e.map((i,u)=>e.map((p,d)=>e[(u+d)%m])),n=G([0,1,2,3,4]).map(i=>l[i]),o=G([0,1,2,3,4]);return n.map(i=>o.map(u=>i[u]))}function M(e){const l=m*m,r=Math.ceil(l*O),n=[];for(let p=0;p<m;p++)for(let d=0;d<m;d++)n.push([p,d]);const t=G(n).slice(0,r),i=new Set(t.map(([p,d])=>`${p}-${d}`));return{userGrid:e.map((p,d)=>p.map((g,E)=>i.has(`${d}-${E}`)?g:null)),prefilled:i}}function L(){const e=v(),{userGrid:l,prefilled:r}=M(e);return{solution:e,userGrid:l,prefilled:r}}function y(e){return e.some(l=>l===null)?!1:new Set(e).size===m}function N(e,l){const r=e.map(n=>n[l]);return r.some(n=>n===null)?!1:new Set(r).size===m}function w(e,l,r,n){return!(e[l].some((i,u)=>u!==r&&i===n)||e.some((i,u)=>u!==l&&i[r]===n))}function k(e){for(let l=0;l<m;l++)if(!y(e[l]))return!1;for(let l=0;l<m;l++)if(!N(e,l))return!1;return!0}function X(e){const l=new Set;for(let r=0;r<m;r++){const n={};e[r].forEach((o,t)=>{o!==null&&(n[o]!==void 0?(l.add(`${r}-${n[o]}`),l.add(`${r}-${t}`)):n[o]=t)})}for(let r=0;r<m;r++){const n={};e.forEach((o,t)=>{const i=o[r];i!==null&&(n[i]!==void 0?(l.add(`${n[i]}-${r}`),l.add(`${t}-${r}`)):n[i]=t)})}return l}const f={INTRO:"intro",PLAYING:"playing",WON:"won",TIMEUP:"timeup"},c={START_GAME:"START_GAME",TICK:"TICK",SET_DRAGGED:"SET_DRAGGED",CLEAR_DRAGGED:"CLEAR_DRAGGED",DROP_CELL:"DROP_CELL",CLEAR_CELL:"CLEAR_CELL",GAME_WON:"GAME_WON",GAME_TIMEUP:"GAME_TIMEUP",RESTART:"RESTART"};function C(e,l){const r={};return R.forEach(n=>{r[n.id]=0}),e.forEach((n,o)=>n.forEach((t,i)=>{t!==null&&l.has(`${o}-${i}`)&&(r[t]=(r[t]||0)+1)})),R.map(n=>({...n,remaining:5-(r[n.id]||0)}))}function I(e,l){const r={};return R.forEach(n=>{r[n.id]=0}),e.forEach((n,o)=>n.forEach((t,i)=>{t!==null&&(r[t]=(r[t]||0)+1)})),R.map(n=>({...n,remaining:5-(r[n.id]||0)}))}const x={phase:f.INTRO,solution:null,userGrid:null,prefilled:null,draggedItem:null,availableBlocks:R.map(e=>({...e,remaining:5})),timeRemaining:_,timeAtWin:null};function $(e,l){switch(l.type){case c.START_GAME:{const{solution:r,userGrid:n,prefilled:o}=L(),t=C(n,o);return{...e,phase:f.PLAYING,solution:r,userGrid:n,prefilled:o,availableBlocks:t,timeRemaining:_,draggedItem:null}}case c.TICK:{if(e.phase!==f.PLAYING)return e;const r=e.timeRemaining-1;return r<=0?{...e,timeRemaining:0,phase:f.TIMEUP,timeAtWin:0}:{...e,timeRemaining:r}}case c.SET_DRAGGED:return{...e,draggedItem:l.payload};case c.CLEAR_DRAGGED:return{...e,draggedItem:null};case c.DROP_CELL:{const{row:r,col:n,pillarId:o}=l.payload;if(e.prefilled.has(`${r}-${n}`)||!w(e.userGrid,r,n,o))return e;const t=e.userGrid.map((p,d)=>p.map((g,E)=>d===r&&E===n?o:g)),i=I(t,e.prefilled),u=k(t);return{...e,userGrid:t,availableBlocks:i,draggedItem:null,phase:u?f.WON:e.phase,timeAtWin:u?e.timeRemaining:e.timeAtWin}}case c.CLEAR_CELL:{const{row:r,col:n}=l.payload;if(e.prefilled.has(`${r}-${n}`))return e;const o=e.userGrid.map((i,u)=>i.map((p,d)=>u===r&&d===n?null:p)),t=I(o,e.prefilled);return{...e,userGrid:o,availableBlocks:t}}case c.GAME_WON:return{...e,phase:f.WON};case c.GAME_TIMEUP:return{...e,phase:f.TIMEUP};case c.RESTART:{const{solution:r,userGrid:n,prefilled:o}=L(),t=C(n,o);return{...x,phase:f.PLAYING,solution:r,userGrid:n,prefilled:o,availableBlocks:t,timeRemaining:_,timeAtWin:null}}default:return e}}const P=s.createContext(null);function z({children:e}){const[l,r]=s.useReducer($,x),n=s.useRef(null);s.useEffect(()=>(l.phase===f.PLAYING?n.current=setInterval(()=>{r({type:c.TICK})},1e3):clearInterval(n.current),()=>clearInterval(n.current)),[l.phase]);const o=s.useCallback(()=>{r({type:c.START_GAME})},[]),t=s.useCallback(()=>{r({type:c.RESTART})},[]),i=s.useCallback(E=>{r({type:c.SET_DRAGGED,payload:E})},[]),u=s.useCallback(()=>{r({type:c.CLEAR_DRAGGED})},[]),p=s.useCallback((E,A,j)=>{r({type:c.DROP_CELL,payload:{row:E,col:A,pillarId:j}})},[]),d=s.useCallback((E,A)=>{r({type:c.CLEAR_CELL,payload:{row:E,col:A}})},[]),g={state:l,startGame:o,restartGame:t,setDragged:i,clearDragged:u,dropOnCell:p,clearCell:d};return a.jsx(P.Provider,{value:g,children:e})}function W(){const e=s.useContext(P);if(!e)throw new Error("useGame must be used within GameProvider");return e}const V=s.lazy(()=>b(()=>import("./IntroPage-CpzawxB8.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),U=s.lazy(()=>b(()=>import("./GamePage-3pGdFpPG.js"),__vite__mapDeps([5,1,2]),import.meta.url)),B=s.lazy(()=>b(()=>import("./ResultPage-Dn1D5W_y.js"),__vite__mapDeps([6,1,2,4,3]),import.meta.url)),Y=s.lazy(()=>b(()=>import("./ThankYouPage-Db2OGyze.js"),__vite__mapDeps([7,1,2,3]),import.meta.url));function F(){return a.jsx("div",{className:"vh-fix flex items-center justify-center bg-sudoku-bg",children:a.jsx("div",{className:"w-8 h-8 border-2 border-sudoku-accent border-t-transparent rounded-full animate-spin"})})}function H({children:e}){const{state:l}=W(),r=S();return l.phase===f.INTRO?a.jsx(T,{to:"/",state:{from:r},replace:!0}):e}function K(){return a.jsx(s.Suspense,{fallback:a.jsx(F,{}),children:a.jsxs(D,{children:[a.jsx(h,{path:"/",element:a.jsx(V,{})}),a.jsx(h,{path:"/game",element:a.jsx(H,{children:a.jsx(U,{})})}),a.jsx(h,{path:"/result",element:a.jsx(B,{})}),a.jsx(h,{path:"/thank-you",element:a.jsx(Y,{})}),a.jsx(h,{path:"*",element:a.jsx(T,{to:"/",replace:!0})})]})})}function Z(){return a.jsx(z,{children:a.jsx(K,{})})}const ee=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{ee as A,f as G,J as P,Q as W,_ as a,X as g,w as i,W as u};
